// Generated by CoffeeScript 1.8.0
var SummaryItem, WorkSpace, demoApp, prepare;

SummaryItem = React.createClass({
  render: function() {
    return React.createElement(React.DOM.p, null, this.props.item);
  }
});

WorkSpace = React.createClass({
  getInitialState: function() {
    return {
      state: 'source',
      source: '',
      summary: '',
      button: 'To summary'
    };
  },
  onChangeSource: function(e) {
    this.setState({
      source: e.target.value
    });
  },
  renderSource: function() {
    return React.createElement(React.DOM.div, null, React.createElement(React.DOM.textarea, {
      "rows": 3,
      "onChange": this.onChangeSource
    }, this.state.source));
  },
  renderSummary: function() {
    var summary;
    summary = this.state.summary.split("\n").filter(function(element) {
      return element !== "";
    });
    return React.createElement(React.DOM.div, null, summary.map(function(result) {
      return React.createElement(SummaryItem, {
        "item": result
      });
    }));
  },
  renderState: function() {
    if (this.state.state === "source") {
      return this.renderSource();
    } else {
      return this.renderSummary();
    }
  },
  handleClick: function() {
    var state, summary;
    state = this.state;
    if (state.state === "source") {
      state.state = "summary";
      state.button = "To source";
      summary = process_summary('', state.source);
      this.state.summary = summary.summary;
    } else {
      state.state = "source";
      state.source = this.state.source;
      state.button = "To summary";
    }
    this.setState(state);
  },
  render: function() {
    return React.createElement(React.DOM.div, null, React.createElement(React.DOM.h1, null, "WorkSpace"), this.renderState(), React.createElement(React.DOM.button, {
      "onClick": this.handleClick
    }, this.state.button));
  }
});

demoApp = React.createClass({
  render: function() {
    return React.createElement(React.DOM.div, null, React.createElement(React.DOM.h1, null, "Summary.js demo app under react.js"), React.createElement(WorkSpace, null));
  }
});

prepare = function() {
  var wrapper;
  wrapper = document.getElementById("wrapper");
  return React.render(React.createElement(demoApp, null), wrapper);
};

window.onload = prepare;
